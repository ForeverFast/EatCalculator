@inherits BaseComponent

<div class="@ClassName(nameof(CreateProduct))" style="@StyleName" @attributes="UserAttributes"
     @onclick="OnClick">
    @ActivatorContent
</div>

<Condition Evaluation="_createProductDialogOpened">
    <Match>
        <MudDialog @ref="_createProductDialog"
                   @bind-IsVisible="_createProductDialogOpened" Options="_dialogOptions"
                   OnBackdropClick="OnDialogBackdropClick">
            <TitleContent>
                <MudText Typo="Typo.h6">
                    <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3" /> Create product
                </MudText>
            </TitleContent>
            <DialogContent>
                <MudForm @ref="_createProductForm" Model="_createProductViewModel"
                         Validation="_createProductViewModelValidator.Validation">
                    <Condition Evaluation="_createProductViewModel != null">
                        <Match>
                            <MudText Class="mt-4">Name</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Name"
                                          For="@(() => _createProductViewModel!.Name)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" />

                            <MudText Class="mt-6">Description</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Description"
                                          For="@(() => _createProductViewModel!.Description)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense"
                                          Lines="3" />

                            <MudText Class="mt-6">Grams</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Grams"
                                          For="@(() => _createProductViewModel!.Grams)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" />

                            <MudText Class="mt-6">Protein</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Protein"
                                          For="@(() => _createProductViewModel!.Protein)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" />

                            <MudText Class="mt-6">Fat</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Fat"
                                          For="@(() => _createProductViewModel!.Fat)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" />

                            <MudText Class="mt-6">Carbohydrate</MudText>
                            <MudTextField @bind-Value="_createProductViewModel!.Carbohydrate"
                                          For="@(() => _createProductViewModel!.Carbohydrate)" Immediate="true"
                                          Variant="Variant.Outlined" Margin="Margin.Dense" />
                        </Match>
                        <NotMatch>
                            <MudProgressCircular Size="Size.Large" Indeterminate="true" />
                        </NotMatch>
                    </Condition>
                </MudForm>
            </DialogContent>
            <DialogActions>
                <MudButton Variant="Variant.Filled" Color="Color.Primary"
                           OnClick="OnSubmit" Class="px-10">
                    <Condition Evaluation="_saving">
                        <Match>
                            <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                            <MudText Class="ms-2">Saving...</MudText>
                        </Match>
                        <NotMatch>
                            Save
                        </NotMatch>
                    </Condition>
                </MudButton>
            </DialogActions>
        </MudDialog>
    </Match>
</Condition>